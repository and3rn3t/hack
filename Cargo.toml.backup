[package]
name = "hack_simulator"
version = "1.0.0"
edition = "2021"
authors = ["Andernet"]
description = "A horror-themed hacking simulator with progressive difficulty"

[lib]
name = "hack_simulator"
crate-type = ["cdylib", "rlib"]

[dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
rand = "0.8"
chrono = { version = "0.4", features = ["wasm-bindgen", "serde"] }

# Web-specific dependencies
wasm-bindgen = { version = "0.2", optional = true }
web-sys = { version = "0.3", optional = true, features = [
  "console",
  "Document",
  "Element",
  "HtmlElement",
  "Window",
] }
js-sys = { version = "0.3", optional = true }
getrandom = { version = "0.2", features = ["js"] }
console_error_panic_hook = { version = "0.1", optional = true }

# Terminal dependencies (only for native builds)
crossterm = { version = "0.27", optional = true }

[features]
default = ["native"]
native = ["crossterm"]
web = ["wasm-bindgen", "web-sys", "js-sys", "console_error_panic_hook"]

[dev-dependencies]
proptest = "1.4"
criterion = "0.5"
wasm-bindgen-test = "0.3"

[[bench]]
name = "challenge_benchmarks"
harness = false

[[bench]]
name = "state_benchmarks"
harness = false

# Optimize for size and performance
[profile.release]
lto = true
panic = 'abort'
opt-level = 'z'  # Optimize for size
codegen-units = 1

# Optimize dependencies for size  
[profile.release.package."*"]
opt-level = 'z'
